import{c as B,k as U,p as O,j as z,l as j,q as A,n as H,o as J}from"./element-plus-df7bc4e3.js";import"./vue-124c939f.js";import{H as M,P}from"./PaginationFooter-985f5506.js";import{d as k,a1 as w,I as $,r as b,o as D,b as S,T as r,a as C,e,a5 as x,Y as F,Z as q,f as L,n as Y,c as Z,U as G,u as K,M as Q,ar as R}from"./@vue-9340bf27.js";import{r as I,_ as W}from"./index-53878eac.js";import{c as v}from"./hook-6ba65076.js";import{m as _}from"./elementComp-e60736a3.js";import"./lodash-es-fd932676.js";import"./@element-plus-d6f5acb0.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./@logicflow-922e186c.js";import"./preact-c85490ff.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1a309c76.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-0225a2a3.js";import"./vue-router-6f09dd9a.js";import"./lscache-deb3809a.js";import"./pinia-0aa78a2b.js";import"./vue-demi-1a095971.js";import"./axios-d2e6824c.js";import"./mockjs-9bbec717.js";const X={class:"dialog-footer"},ee=F("取消"),oe=k({__name:"proDailogs",props:{title:null},emits:["submitData"],setup(i,{expose:p,emit:d}){const m=i,g=w($("prodata")),c=b(!1),a=w({goods_name:"",goods_price:0,goods_num:0,goods_size:0,goods_unitl:"",goods_describe:"",goods_img:""}),V=()=>{d("submitData",a)},y=()=>{console.log("哈哈哈"),g.name="测试二",c.value=!1};return p({dialogFormVisible:c}),(E,l)=>{const f=B,u=U,h=O,t=z,s=j,o=A;return D(),S(o,{modelValue:c.value,"onUpdate:modelValue":l[5]||(l[5]=n=>c.value=n),width:"800",title:m.title},{footer:r(()=>[C("span",X,[e(s,{onClick:x(y,["stop"])},{default:r(()=>[ee]),_:1},8,["onClick"]),e(s,{type:"primary",onClick:x(V,["stop"])},{default:r(()=>[F(q(g.name),1)]),_:1},8,["onClick"])])]),default:r(()=>[e(t,{model:a,inline:!1},{default:r(()=>[e(u,{label:"商品名称","label-width":""},{default:r(()=>[e(f,{modelValue:a.goods_name,"onUpdate:modelValue":l[0]||(l[0]=n=>a.goods_name=n)},null,8,["modelValue"])]),_:1}),e(u,{label:"商品价格","label-width":""},{default:r(()=>[e(h,{modelValue:a.goods_price,"onUpdate:modelValue":l[1]||(l[1]=n=>a.goods_price=n),precision:2,step:.1,max:10},null,8,["modelValue","step"])]),_:1}),e(u,{label:"商品库存","label-width":""},{default:r(()=>[e(h,{modelValue:a.goods_num,"onUpdate:modelValue":l[2]||(l[2]=n=>a.goods_num=n)},null,8,["modelValue"])]),_:1}),e(u,{label:"商品单元","label-width":""},{default:r(()=>[e(f,{type:"string",modelValue:a.goods_unitl,"onUpdate:modelValue":l[3]||(l[3]=n=>a.goods_unitl=n)},null,8,["modelValue"])]),_:1}),e(u,{label:"商品图片","label-width":""},{default:r(()=>[e(f,{modelValue:a.goods_img,"onUpdate:modelValue":l[4]||(l[4]=n=>a.goods_img=n)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),te=async i=>await I({url:"/goods/issure",method:"post",data:i}),ae=async i=>await I({url:"/goods",method:"get",params:i});w({pageNum:1,pageSize:50,background:""});const le=(i,p,d)=>i?(p.value=d.filter(m=>m.user_name.indexOf(i)!==-1||m.phone.indexOf(i)!==-1||m.password.indexOf(i)!==-1),v.main_loading=!1,p.value):(v.main_loading=!1,d),se={class:"sys"},ne={class:"context"},ie=k({__name:"product",setup(i){const p=w({name:"按钮"});Q("prodata",p);const d=b(),m=b([]);let g=[];const c=async t=>{v.main_loading=!0,d.value=await le(t,d,g)},a=b(),V=b(),y=async()=>{try{let t=await ae({pageNum:1,pageSize:50});d.value=t.result.list,g=JSON.parse(JSON.stringify(d.value)),_(t==null?void 0:t.message,"Success!!")}catch(t){if(t){const{data:s}=t==null?void 0:t.response;_(s.message,"Error")}}},E=t=>{m.value=t},l=async t=>{p.name="测试一下";try{let s=await te({...t});_(s==null?void 0:s.message,"Success!!"),a.value.dialogFormVisible=!1}catch(s){if(s){const{data:o}=s==null?void 0:s.response;_(o==null?void 0:o.message,"Error")}}},f=()=>{V.value.dialogFormVisible=!0},u=async()=>{a.value.dialogFormVisible=!0},h=()=>m.value.length<1?_("请选择下架的商品","Error"):_(JSON.stringify(m.value),"Success");return L(async()=>{y(),await Y(),v.main_loading=!1}),(t,s)=>{const o=J,n=H,N=R("loadings");return D(),Z("div",se,[e(M,{title:"商品管理",print:!0,printContent:"打印",onPrintEvent:f,add:!0,addContent:"上架",onAddEvent:u,del:!0,delContent:"下架",onDelEvent:h,onSearchFilter:c}),C("div",ne,[G((D(),S(n,{class:"tabheight",data:d.value,"row-key":T=>T.id,onSelectionChange:E,border:!0},{default:r(()=>[e(o,{type:"selection","reserve-selection":!0,width:"50"}),e(o,{prop:"id",label:"ID",width:"50"}),e(o,{prop:"goods_author_id",label:"发布者ID",width:"100"}),e(o,{prop:"goods_fix_author_id",label:"修改者ID",width:"100"}),e(o,{prop:"goods_name",width:"80",label:"商品名称"}),e(o,{prop:"goods_num",label:"库存"}),e(o,{prop:"goods_price",width:"100",label:"商品价格/¥"}),e(o,{prop:"goods_unitl",width:"100",label:"商品单元"}),e(o,{prop:"goods_img",width:"300",label:"商品图片"}),e(o,{prop:"goods_size",width:"100",label:"规格"}),e(o,{prop:"goods_describe",width:"300",label:"商品描述"}),e(o,{prop:"createdAt",width:"200",label:"上架时间"}),e(o,{prop:"updatedAt",width:"200",label:"更新时间"})]),_:1},8,["data","row-key"])),[[N,K(v).main_loading]])]),e(P),e(oe,{onSubmitData:l,ref_key:"pro_dailog",ref:a,title:"新增/产品"},null,512)])}}});const Te=W(ie,[["__scopeId","data-v-4f41f408"]]);export{Te as default};
